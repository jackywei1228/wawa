var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},control;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.toggleGroup=new ToggleButtonGroup,t.skinName="resource/skin/ui/BottomToggleSkin.exml",t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t}return __extends(t,e),t.prototype.onComplete=function(){},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.toggleGroup.addToggleButton(this.scene0),this.toggleGroup.addToggleButton(this.scene1),this.toggleGroup.addToggleButton(this.scene2),this.toggleGroup.addToggleButton(this.scene3),this.toggleGroup.selectedIndex=0,this.toggleGroup.addEventListener(egret.Event.CHANGE,this.onChange,this)},t.prototype.onChange=function(){SoundMgr.instance.playEffect(Sound.CLICK),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t}(eui.Component);e.BottomToggle=t,__reflect(t.prototype,"control.BottomToggle")}(control||(control={}));var Enum=function(){function e(){}return e.start=function(){return this.index=0,this.index},e.next=function(){return++this.index},e}();Enum.index=0,__reflect(Enum.prototype,"Enum");var PanelName=function(){function e(){}return e.init=function(){e.PANEL_CLASS[e.BuyPanel]=BuyPanel,e.PANEL_CLASS[e.NoticePanel]=NoticePanel,e.PANEL_CLASS[e.RulePanel]=RulePanel,e.PANEL_CLASS[e.ShopPanel]=ShopPanel,e.PANEL_CLASS[e.SkillTipPanel]=SkillTipPanel,e.PANEL_CLASS[e.RankPanel]=RankPanel,e.PANEL_CLASS[e.QRPanel]=QRPanel,e.PANEL_CLASS[e.StartTipPanel]=StartTipPanel,e.PANEL_CLASS[e.ResultPanel]=ResultPanel,e.PANEL_CLASS[e.ExchangePanel]=ExchangePanel},e}();PanelName.BuyPanel=Enum.start(),PanelName.NoticePanel=Enum.next(),PanelName.RulePanel=Enum.next(),PanelName.ShopPanel=Enum.next(),PanelName.SkillTipPanel=Enum.next(),PanelName.RankPanel=Enum.next(),PanelName.QRPanel=Enum.next(),PanelName.StartTipPanel=Enum.next(),PanelName.ResultPanel=Enum.next(),PanelName.ExchangePanel=Enum.next(),PanelName.PANEL_NUM=Enum.next(),PanelName.PANEL_CLASS=[],__reflect(PanelName.prototype,"PanelName");var DataLoader=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.post=function(e,t,n,i){function o(){4==r.readyState&&(200==r.status?n.call(i,JSON.parse(r.responseText),e):alert("获取用户信息,请稍后重试。"))}e=e+"?time="+Date.now(),n.bind(i);var r=new XMLHttpRequest;r.onreadystatechange=o,r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t)},e}();__reflect(DataLoader.prototype,"DataLoader");var GameData=function(){function e(){}return e}();__reflect(GameData.prototype,"GameData");var GameURL=function(){function e(){}return e}();GameURL.USER=window.game_url+"/site/config",GameURL.PLAY=window.game_url+"/game/play",GameURL.CREATE=window.game_url+"/pay/create",GameURL.REWARD=window.game_url+"/user/exchange/reward",GameURL.PERCENTAGE=window.game_url+"/user/exchange/percentage",GameURL.RECORD=window.game_url+"/user/record",GameURL.NOTICE=window.game_url+"/site/notice",__reflect(GameURL.prototype,"GameURL");var Notice=function(){function e(){}return e}();__reflect(Notice.prototype,"Notice");var Pay=function(){function e(){}return e}();__reflect(Pay.prototype,"Pay");var Sound=function(){function e(){}return e}();Sound.CLICK="click_mp3",__reflect(Sound.prototype,"Sound");var User=function(){function e(){this.amount=0,this.exchange=!1,this.status=!1}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(User.prototype,"User");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function o(e){t.call(i,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?i(o):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ResourceItem=RES.ResourceItem,Headline=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/ui/HeadlineSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){egret.setInterval(this.onInterval,this,2e3)},t.prototype.onInterval=function(){var e=this;if(null==this.notice||this.notice.length<=0)return void DataLoader.instance.post(GameURL.NOTICE,null,this.onNotice,this);this.content.y=40;var t=this.notice[this.index];RES.getResByUrl(t.avatar,function(t,n){e.icon.source=t},this,ResourceItem.TYPE_IMAGE),this.desc.text=t.content,this.index++,egret.Tween.removeTweens(this.content),egret.Tween.get(this.content).to({y:0},500).wait(1e3).to({y:-40},500),this.index==this.notice.length&&(this.index=0,DataLoader.instance.post(GameURL.NOTICE,null,this.onNotice,this))},t.prototype.onNotice=function(e,t){0==e.code?(e=e.data,this.notice=e.item):egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&alert("获取用户信息,请稍后重试。错误码："+JSON.stringify(e))},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.content.mask=this.maskRect,this.content.y=40},t}(eui.Component);__reflect(Headline.prototype,"Headline");var Icon=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.index=-1,t.idx=-1,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/ui/IconSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.setIndex()},t.prototype.setIndex=function(){if(this.isCreated){this.index=Math.floor(5*Math.random()),this.hat0_0.visible=this.hat0_1.visible=0==this.index,this.hat1.visible=1==this.index,this.hat2.visible=2==this.index,this.hat3.visible=3==this.index,this.idx=Math.floor(5*Math.random()),this.eye0.visible=0==this.idx,this.eye1.visible=1==this.idx,this.eye2.visible=2==this.idx,this.eye3.visible=3==this.idx;var e=User.instance.game[t.luckIndex].item;this.luckIndex2=Math.floor(Math.random()*e.length);var n=e[this.luckIndex2],i=0==n?"?":String(n);this.desc.text=i}},t}(eui.Component);Icon.WIDTH=178,Icon.luckIndex=0,__reflect(Icon.prototype,"Icon");var DisplayObjectContainer=egret.DisplayObjectContainer,Component=eui.Component,Layer=function(){function e(){}return e.addResize=function(t,n,i){e.RESIZE.push({name:t,func:n,thisObj:i})},e.removeResize=function(t){for(var n=0;n<e.RESIZE.length;n++)if(e.RESIZE[n].name==t)return void e.RESIZE.splice(n,1)},e.execute=function(){UIMgr.instance.closeCurrentPanel(null,null,!0),UIMgr.instance.reset(),UIMgr.instance.resetWin();for(var t=0;t<e.RESIZE.length;t++)e.RESIZE[t].func.apply(e.RESIZE[t].thisObj)},e}();Layer.SCENE_LAYER=new Component,Layer.PANEL_LAYER=new Component,Layer.RESIZE=[],__reflect(Layer.prototype,"Layer");var BuyPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/BuyPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy5Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy20Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy50Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy100Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy200Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.onShow()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>1,!this.isCreated},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTap=function(e){if(SoundMgr.instance.playEffect(Sound.CLICK),e.target===this.closeBtn)return void UIMgr.instance.closeCurrentPanel();var t;e.target===this.buy5Btn?t=5:e.target===this.buy10Btn?t=10:e.target===this.buy20Btn?t=20:e.target===this.buy50Btn?t=50:e.target===this.buy100Btn?t=100:e.target===this.buy200Btn&&(t=200),window.location.href=GameURL.CREATE+("?amount="+t)},t}(eui.Component);__reflect(BuyPanel.prototype,"BuyPanel",["IPanel"]);var ExchangePanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/ExchangePanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.onShow()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isCreated&&(this.fail.visible=!User.instance.exchange,this.success.visible=User.instance.exchange,this.alpha=1,egret.Tween.get(this).wait(2e3).to({alpha:0},600).call(function(){UIMgr.instance.closeCurrentPanel(null,null,!0)},this))},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];egret.Tween.removeTweens(this)},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(ExchangePanel.prototype,"ExchangePanel",["IPanel"]);var NoticePanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/NoticePanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),UIMgr.instance.closeCurrentPanel()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isCreated&&this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),UIMgr.instance.show(PanelName.StartTipPanel)},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(NoticePanel.prototype,"NoticePanel",["IPanel"]);var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.bottomSource=["loading_zi5_png","loading_zi2_2_png","loading_zi3_png","loading_zi4_png","loading_zi6_png"],t.bottomIdx=0,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/panel/LoadingUISkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.loadBar.mask=this.loadBarMask,this.isCreated=!0},t.prototype.onComplete=function(e){this.intervalId=egret.setInterval(this.onTimeout,this,2e3)},t.prototype.onTimeout=function(){this.bottomIdx++,this.bottomIdx>=this.bottomSource.length&&(this.bottomIdx=0),this.bottomTip.source=this.bottomSource[this.bottomIdx]},t.prototype.onClose=function(){egret.clearInterval(this.intervalId)},t.prototype.setProgress=function(e,t){if(this.isCreated){var n=e/t;this.loadBarMask.width=381*n;var i=(100*n).toFixed(2);this.textField.text=i+"%"}},t}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI");var QRPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/QRPanelSkin.exml",t.visible=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.userIdLabel.text="用户ID:"+User.instance.userid,RES.getResByUrl(User.instance.qrcode,function(e,t){},this,RES.ResourceItem.TYPE_IMAGE);var t=document.getElementById("share"),n=document.getElementById("closeBtn"),i=document.body.clientHeight/878;t.src=User.instance.saveQrcode,t.style.width=document.body.clientWidth+"px",t.style.height=document.body.clientHeight-64*i+"px",t.style.left="0px",t.style.top="0px";var o=function(e){if(e.screenY<250&&e.screenX>330){SoundMgr.instance.playEffect(Sound.CLICK);var t=document.getElementById("share"),n=document.getElementById("closeBtn");t.style.display="none",n.style.display="none",UIMgr.instance.closeCurrentPanel()}};t.onclick=o,n.onclick=o,this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),UIMgr.instance.closeCurrentPanel()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.visible=!1;var n=document.getElementById("share");n.style.display="inline";var i=document.getElementById("closeBtn");i.style.display="inline"},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=document.getElementById("share");n.style.display="none";var i=document.getElementById("closeBtn");i.style.display="none"},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(QRPanel.prototype,"QRPanel",["IPanel"]);var RankPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/RankPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.tabBar.addEventListener(egret.Event.CHANGE,this.onChange,this,!1),this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),e.target===this.closeBtn&&UIMgr.instance.closeCurrentPanel()},t.prototype.onChange=function(e){SoundMgr.instance.playEffect(Sound.CLICK),this.viewStack.selectedIndex=this.tabBar.selectedIndex},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>1,!this.isCreated},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(RankPanel.prototype,"RankPanel",["IPanel"]);var ResultPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.loseSource=["wenzi_7_png","wenzi_8_png","wenzi_9_png","wenzi_10_png","wenzi_11_png","wenzi_12_png"],t.skinName="resource/skin/panel/ResultPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.continueBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),UIMgr.instance.closeCurrentPanel()},t.prototype.onShow=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.isCreated){this.result.text=String(User.instance.amount),this.validateNow(),egret.setTimeout(function(){e.icon.x=e.result.x+e.result.width+20},this,200),this.bigWin0.visible=this.bigWin1.visible=User.instance.status;var i=Math.floor(Math.random()*this.loseSource.length);this.lose.source=this.loseSource[i],this.lose.visible=!User.instance.status}},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(ResultPanel.prototype,"ResultPanel",["IPanel"]);var RulePanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/RulePanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),UIMgr.instance.closeCurrentPanel()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>1,!this.isCreated},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(RulePanel.prototype,"RulePanel",["IPanel"]);var ShopPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/ShopPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy5Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy20Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy50Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),e.target===this.closeBtn?UIMgr.instance.closeCurrentPanel():DataLoader.instance.post(GameURL.PERCENTAGE,null,this.onPercentage,this)},t.prototype.onPercentage=function(e,t){UIMgr.instance.closeCurrentPanel(null,null,!0),0==e.code?(User.instance.exchange=!0,Scence1.instance.exchangeGold.text="0"):(User.instance.exchange=!1,alert(e.errMsg)),UIMgr.instance.show(PanelName.ExchangePanel)},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>1,!this.isCreated},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(ShopPanel.prototype,"ShopPanel",["IPanel"]);var SkillTipPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.skinName="resource/skin/panel/SkillTipPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.onShow()},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK),UIMgr.instance.closeCurrentPanel()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>1,!this.isCreated},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onYes=function(e){UIMgr.instance.closeCurrentPanel()},t}(eui.Component);__reflect(SkillTipPanel.prototype,"SkillTipPanel",["IPanel"]);var StartTipPanel=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.alpha=0,t.skinName="resource/skin/panel/StartTipPanelSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.onShow()},t.prototype.onShow=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];egret.Tween.get(this).to({alpha:1},600).wait(800).to({alpha:0},600).call(function(){UIMgr.instance.closeCurrentPanel(null,null,!0)},this)},t.prototype.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onUpdate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(StartTipPanel.prototype,"StartTipPanel",["IPanel"]);var UIMgr=function(){function e(){this.panelArray=new Array(PanelName.PANEL_NUM),this._isShow=!1,this.TouchLayerName="TouchLayer"}return Object.defineProperty(e,"instance",{get:function(){return null==e.mgr&&(PanelName.init(),e.mgr=new e),e.mgr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchLayer",{get:function(){return null!=this._sprite?this._sprite:(this.reset(),this._sprite)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._sprite=new egret.Sprite,this._sprite.name=this.TouchLayerName,this._sprite.touchEnabled=!0,this._sprite.touchChildren=!0;var e=this._sprite.graphics;e.beginFill(0,.5),e.drawRect(0,0,Layer.WIDTH,Layer.HEIGHT),e.endFill(),this._sprite.width=Layer.WIDTH,this._sprite.height=Layer.HEIGHT,UIUtil.setAnchor(this._sprite)},e.prototype.resetWin=function(){for(var e=this.panelArray.length,t=0;e>t;t++){var n=this.panelArray[t];null!=n&&(n.x=Layer.WIDTH>>1,n.y=Layer.HEIGHT>>1)}},e.prototype.getPanel=function(e){var t=this.panelArray[e];return null==t&&(t=new PanelName.PANEL_CLASS[e],this.panelArray[e]=t,t.initialized=!1,t.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.onCreated,this)),t},e.prototype.show=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.win=this.getPanel(e),null!=this.win&&(this.closeCurrentPanel(null,null,!0),this.args=t,this.doShow())},e.prototype.closeWindHandler=function(e){var t=e.target;null!=t&&t.name==this.TouchLayerName&&(SoundMgr.instance.playEffect(Sound.CLICK),this.closeCurrentPanel())},e.prototype.closeCurrentPanel=function(e,t,n){void 0===n&&(n=!1);var i=this.touchLayer;if(null==i.parent){if(null==e)return;return void e.call(t)}if(0==i.numChildren){if(null==e)return;return void e.call(t)}i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeWindHandler,this),this.removePanel(n),null!=e&&e.call(t)},e.prototype.removePanel=function(e){var t=this,n=this.touchLayer;if(null!=n.parent){var i=n.getChildAt(0);if(null!=i)return e?(n.removeChild(i),Layer.PANEL_LAYER.removeChild(n),this._isShow=!1,void i.onClose()):void egret.Tween.get(i).to({scaleX:0,scaleY:0},200).call(function(){null!=i.parent&&(n.removeChild(i),Layer.PANEL_LAYER.removeChild(n),t._isShow=!1,i.onClose())});Layer.PANEL_LAYER.removeChild(n),this._isShow=!1}},Object.defineProperty(e.prototype,"isShow",{get:function(){return this._isShow},enumerable:!0,configurable:!0}),e.prototype.doShow=function(){var e=this.win,t=this.touchLayer;e.scaleX=e.scaleY=.1,t.addChild(e),this.win.onShow.apply(this.win,this.args),this.touchLayer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeWindHandler,this),this._isShow=!0,e.initialized?(Layer.PANEL_LAYER.addChild(t),egret.Tween.get(e).to({scaleX:1,scaleY:1},240,egret.Ease.backOut)):(e.visible=!1,Layer.PANEL_LAYER.addChild(t))},e.prototype.onCreated=function(e){var t=e.currentTarget;UIUtil.setAnchor(t,!1),WindowAdapter.FullScreenCenter(t),t.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onCreated,this),t.initialized=t.visible=!0,egret.Tween.get(t).to({scaleX:1,scaleY:1},240,egret.Ease.backOut)},e}();__reflect(UIMgr.prototype,"UIMgr");var BottomToggle=control.BottomToggle,GameScence=function(e){function t(){var t=e.call(this)||this;return t.isScene0=!0,t.isScene3=!1,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/GameSceneSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),Scence0.instance.onShow(),Layer.SCENE_LAYER.addChild(Scence0.instance),this.bottomToggle.addEventListener(egret.Event.CHANGE,this.onChange,this),this.resizeWindow()},t.prototype.resizeWindow=function(){},t.prototype.onComplete=function(e){},t.prototype.onChange=function(){switch(this.isScene0?(this.isScene0=!1,Scence0.instance.onClose()):this.isScene3&&(this.isScene3=!1,Scence3.instance.onClose()),UIMgr.instance.closeCurrentPanel(null,null,!0),Layer.SCENE_LAYER.removeChildren(),this.bottomToggle.toggleGroup.selectedIndex){case 0:this.isScene0=!0,Scence0.instance.onShow(),Layer.SCENE_LAYER.addChild(Scence0.instance);break;case 1:Layer.SCENE_LAYER.addChild(Scence1.instance);break;case 2:Layer.SCENE_LAYER.addChild(Scence2.instance);break;case 3:this.isScene3=!0,Scence3.instance.onShow(),Layer.SCENE_LAYER.addChild(Scence3.instance)}},t}(eui.Component);__reflect(GameScence.prototype,"GameScence");var Scence0=function(e){function t(){var t=e.call(this)||this;return t.isCreated=!1,t.clamping=!1,t.icons=[],t.icons2=[],t.scale=.54,t.lastIconIndex=6,t.lastIcon2Index=0,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/scene/Scene0Skin.exml",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapStart,this),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.tipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.withdraw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.shopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.userIdLabel.text="用户ID:"+User.instance.userid,this.initUserInfo(),this.radioBtn5.group.addEventListener(eui.UIEvent.CHANGE,function(e){SoundMgr.instance.playEffect(Sound.CLICK),t.setClampSource()},this),this.resizeWindow()},t.prototype.setClampSource=function(){this.clamping||this.setClampSource2()},t.prototype.setClampSource2=function(){var e=this.radioBtn5.group.selectedValue;if(5==e?this.clamp.source="jiazi1.1_png":10==e?this.clamp.source="jiazi2.1_png":20==e&&(this.clamp.source="jiazi3.1_png"),!this.clamping)for(var t=User.instance.game,n=0;n<t.length;n++)if(t[n].sessId==e){Icon.luckIndex=n;for(var i=0;4>i;i++)this.icons2[i].setIndex();break}},t.prototype.initUserInfo=function(){this.pointLabel.text=User.instance.point.toFixed(2).toString(),this.rewardLabel.text=User.instance.reward.toFixed(2).toString()},t.prototype.resizeWindow=function(){},t.prototype.onTapStart=function(e){if(!this.clamping){SoundMgr.instance.playEffect(Sound.CLICK);var t=this.radioBtn5.group.selectedValue;if(User.instance.point<t)return void UIMgr.instance.show(PanelName.BuyPanel);5==t?this.clamp.source="jiazi1.2_png":10==t?this.clamp.source="jiazi2.2_png":20==t&&(this.clamp.source="jiazi3.2_png"),this.clamping=!0,this.clampGroupY=this.clampGroup.y,egret.Tween.get(this.clampGroup).to({y:this.clampGroupY+400},2e3).call(this["catch"],this).call(this.setClampSource2,this).to({y:this.clampGroupY+100},1500).call(this.drop,this).to({y:this.clampGroupY},500).call(this.clampOver,this)}},t.prototype["catch"]=function(){for(var e,t=this.width,n=0;4>n;n++){var i=Math.abs(this.icons2[n].x-this.group1.width/2);t>i&&(t=i,e=n)}var o=User.instance.game[Icon.luckIndex],r=o.item[this.icons2[e].luckIndex2],s="amount="+r+"&sessId="+o.sessId;DataLoader.instance.post(GameURL.PLAY,s,this.onPlay,this);var a=new UpIcon(this.icons2[e]);this.upIcon=a,this.clampGroup.addChild(a),a.y=531,a.horizontalCenter=0,this.icons2[e].group.visible=!1},t.prototype.onPlay=function(e,t){0==e.code?(e=e.data,User.instance.reward=e.reward,User.instance.point=e.point,this.pointLabel.text=e.point,this.rewardLabel.text=e.reward,User.instance.amount=e.amount,User.instance.status=1==e.status):100==e.code?UIMgr.instance.show(PanelName.BuyPanel):egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&alert("获取用户信息,请稍后重试。错误码："+JSON.stringify(e))},t.prototype.drop=function(){User.instance.status||egret.Tween.get(this.upIcon).to({y:this.upIcon.y+400},1e3).call(this.dropIcon,this)},t.prototype.dropIcon=function(){UIMgr.instance.show(PanelName.ResultPanel),this.clampGroup.removeChild(this.upIcon)},t.prototype.clampOver=function(){var e=this;this.clamping=!1,egret.setTimeout(function(){e.setClampSource()},this,500),User.instance.status&&(UIMgr.instance.show(PanelName.ResultPanel),this.clampGroup.removeChild(this.upIcon))},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK);var t=e.target;if(UIUtil.loopTween(t,{scaleX:0,scaleY:0},{scaleX:t.scaleX,scaleY:t.scaleY}),this.ruleBtn===t)UIMgr.instance.show(PanelName.RulePanel);else if(this.tipBtn===t)UIMgr.instance.show(PanelName.SkillTipPanel);else if(this.withdraw===t){if(User.instance.reward<1)return User.instance.exchange=!1,void UIMgr.instance.show(PanelName.ExchangePanel);DataLoader.instance.post(GameURL.REWARD,null,this.onReward,this)}else this.shopBtn===t&&UIMgr.instance.show(PanelName.ShopPanel)},t.prototype.onReward=function(e,t){0==e.code?(User.instance.exchange=!0,this.rewardLabel.text="0",User.instance.reward=0):(User.instance.exchange=!1,alert(e.errMsg))},t.prototype.onComplete=function(e){UIMgr.instance.show(PanelName.NoticePanel),this.initIcon(),this.isCreated=!0},t.prototype.initIcon=function(){for(var e=0;7>e;e++){var t=new Icon;this.icons.push(t),t.x=e*Icon.WIDTH,t.scaleX=t.scaleY=this.scale,this.group0.addChild(t),t.setIndex()}for(var n=0;4>n;n++){var t=new Icon;this.icons2.push(t),t.x=n*Icon.WIDTH,this.group1.addChild(t),t.validateNow(),t.anchorOffsetX=t.width/2,t.setIndex()}},t.prototype.onShow=function(){egret.startTick(this.onTick,this)},t.prototype.onClose=function(){egret.stopTick(this.onTick,this)},t.prototype.onTick=function(e){if(!this.isCreated)return!0;for(var t=-Icon.WIDTH*this.scale,n=0;7>n;n++)this.icons[n].x<=t&&(this.icons[n].x=this.icons[this.lastIconIndex].x+Icon.WIDTH,this.icons[n].group.visible=!0,this.icons[n].setIndex(),this.lastIconIndex=n),this.icons[n].x-=2;for(var i=0;4>i;i++)this.icons2[i].x>=this.width+this.icons2[i].anchorOffsetX&&(this.icons2[i].x=this.icons2[this.lastIcon2Index].x-Icon.WIDTH,this.icons2[i].group.visible=!0,this.icons2[i].setIndex(),this.lastIcon2Index=i),this.icons2[i].x+=2;return!0},t}(eui.Component);__reflect(Scence0.prototype,"Scence0");var TabBar=eui.TabBar,ViewStack=eui.ViewStack,Label=eui.Label,Scence1=function(e){function t(){var t=e.call(this)||this;return t.rewardArray=new eui.ArrayCollection,t.exchangeArray=new eui.ArrayCollection,t.rankArray=new eui.ArrayCollection,t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/scene/Scene1Skin.exml",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.tabBar.addEventListener(egret.Event.CHANGE,this.onChange,this,!1),this.exchangeShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this,!1),this.exchangeGold.text=String(User.instance.percentage),this.accumulateGold.text=String(User.instance.percentage),this.student0.text="一级徒弟数量:  "+User.instance.firstUser,this.student1.text="二级徒弟数量:  "+User.instance.secondUser,this.student2.text="三级徒弟数量:  "+User.instance.thirdUser,this.resizeWindow()},t.prototype.resizeWindow=function(){},t.prototype.onComplete=function(e){this.rewardGroup.dataProvider=this.rewardArray,this.exchangeGroup.dataProvider=this.exchangeArray,this.rankGroup.dataProvider=this.rankArray,this.userIdLabel.text="用户ID:"+User.instance.userid,this.refresh(),egret.setInterval(this.refresh,this,6e5)},t.prototype.refresh=function(){DataLoader.instance.post(GameURL.RECORD,null,this.onRecord,this)},t.prototype.onRecord=function(e,t){if(0==e.code){e=e.data;for(var n=e.prize,i=0;i<n.length;i++)n[i].title=n[i].title,n[i].point=n[i].point+"金币",n[i].time=n[i].time,n[i].sess="投注"+n[i].sess+"金币";this.rewardArray.source=n,User.instance.percentage=e.subtotal.point,this.accumulateGold.text=String(e.subtotal.totalPoint),this.exchangeGold.text=String(User.instance.percentage),this.student0.text="一级徒弟数量:  "+User.instance.firstUser,this.student1.text="二级徒弟数量:  "+User.instance.secondUser,this.student2.text="三级徒弟数量:  "+User.instance.thirdUser;
for(var o=e.exchange,i=0;i<o.length;i++)o[i].txt0=o[i].amount+"金币",o[i].txt1=1==o[i].status?"提现中":"提现成功",o[i].txt2=o[i].time,o[i].txt3=1==o[i].type?"奖金":"佣金",o[i].source=i%2==0?"zq_tiao_1_png":"zq_tiao_2_png";this.exchangeArray.source=o;for(var r=e.rank,i=0;i<r.length;i++)r[i].txt0=r[i].userid,r[i].txt1=r[i].amount+"金币",r[i].txt2="第"+r[i].rank+"名",r[i].source=i%2==0?"zq_tiao_1_png":"zq_tiao_2_png";this.rankArray.source=r}else egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&alert("获取用户信息,请稍后重试。错误码："+JSON.stringify(e))},t.prototype.onTap=function(e){return SoundMgr.instance.playEffect(Sound.CLICK),User.instance.percentage<1?(User.instance.exchange=!1,void UIMgr.instance.show(PanelName.ExchangePanel)):void DataLoader.instance.post(GameURL.PERCENTAGE,null,this.onPercentage,this)},t.prototype.onPercentage=function(e,n){0==e.code?(User.instance.exchange=!0,t.instance.exchangeGold.text="0"):(User.instance.exchange=!1,alert(e.errMsg))},t.prototype.onChange=function(e){SoundMgr.instance.playEffect(Sound.CLICK),this.viewStack.selectedIndex=this.tabBar.selectedIndex},t}(eui.Component);__reflect(Scence1.prototype,"Scence1");var Scence2=function(e){function t(){var t=e.call(this)||this;return t.once(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/skin/scene/Scene2Skin.exml",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.QRBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.resizeWindow()},t.prototype.resizeWindow=function(){},t.prototype.onTap=function(e){SoundMgr.instance.playEffect(Sound.CLICK);var t=e.target;this.QRBtn===t?UIMgr.instance.show(PanelName.QRPanel):this.rankBtn===t?UIMgr.instance.show(PanelName.RankPanel):this.ruleBtn===t&&UIMgr.instance.show(PanelName.RulePanel)},t.prototype.onComplete=function(e){},t.prototype.onChange=function(){},t}(eui.Component);__reflect(Scence2.prototype,"Scence2");var Scence3=function(e){function t(){var t=e.call(this)||this;return t.once(eui.UIEvent.COMPLETE,t.onComplete,t,!1),t.skinName="resource/skin/scene/Scene3Skin.exml",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=document.getElementById("kefu");t.src=User.instance.kefu;var n=document.body.clientWidth/540,i=document.body.clientHeight/878;t.style.width=348*n+"px",t.style.height=348*i+"px",t.style.left=97*n+"px",t.style.top=269*i+"px",this.resizeWindow()},t.prototype.resizeWindow=function(){},t.prototype.onComplete=function(e){RES.getResByUrl(User.instance.kefu,function(e,t){},this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.onShow=function(){var e=document.getElementById("kefu");e.style.display="inline"},t.prototype.onClose=function(){var e=document.getElementById("kefu");e.style.display="none"},t}(eui.Component);__reflect(Scence3.prototype,"Scence3");var ToggleButtonGroup=function(e){function t(){var t=e.call(this)||this;return t.enabelSelect=!0,t._currSelectedIndex=-1,t._toggleButtons=[],t._currSelectedButton=null,t}return __extends(t,e),t.prototype.addToggleButton=function(e){e&&-1==this._toggleButtons.indexOf(e)&&(e.$autoSelected=!1,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__toggleButtonClickHandler,this),this._toggleButtons.push(e))},t.prototype.__toggleButtonClickHandler=function(e){var t=e.currentTarget;this.selectedIndex=this._toggleButtons.indexOf(t)},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._currSelectedIndex},set:function(e){if(this.enabelSelect){var t=this._currSelectedIndex!=e;if(-1==e)this._currSelectedButton&&(this._currSelectedButton.selected=!1),this._currSelectedIndex=e,this._currSelectedButton=null;else{var n=this._toggleButtons[e];n.selected||(this._currSelectedButton&&(this._currSelectedButton.selected=!1),n.selected=!0,this._currSelectedIndex=e,this._currSelectedButton=n)}t&&this.dispatchEvent(new egret.Event(egret.Event.CHANGE))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currSelectedButton",{get:function(){return this._currSelectedButton},enumerable:!0,configurable:!0}),t.prototype.getButtonByIndex=function(e){return e>=0&&e<this._toggleButtons.length?this._toggleButtons[e]:null},t.prototype.getIndexByButton=function(e){return this._toggleButtons.indexOf(e)},t.prototype.removeAllButton=function(){for(var e=0;e<this._toggleButtons.length;e++)this._toggleButtons[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__toggleButtonClickHandler,this);this._toggleButtons.splice(0,this._toggleButtons.length)},t.prototype.dispose=function(){this.removeAllButton(),this._currSelectedButton=null,this._toggleButtons=null},t}(egret.EventDispatcher);__reflect(ToggleButtonGroup.prototype,"ToggleButtonGroup");var UpIcon=function(e){function t(t){var n=e.call(this)||this;return n.isCreated=!1,n.index=-1,n.luckIndex2=-1,n.index=t.index,n.luckIndex2=t.luckIndex2,n.once(eui.UIEvent.COMPLETE,n.onComplete,n),n.skinName="resource/skin/ui/UpIconSkin.exml",n}return __extends(t,e),t.prototype.onComplete=function(){},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isCreated=!0,this.setIndex()},t.prototype.setIndex=function(){if(this.isCreated){this.hat0_0.visible=this.hat0_1.visible=0==this.index,this.hat1.visible=1==this.index,this.hat2.visible=2==this.index,this.hat3.visible=3==this.index;var e=User.instance.game[Icon.luckIndex].item,t=e[this.luckIndex2],n=0==t?"?":String(t);this.desc.text=n}},t}(eui.Component);__reflect(UpIcon.prototype,"UpIcon");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isResourceLoadEnd=!1,t.isUserLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.once(egret.Event.ADDED_TO_STAGE,this.onAddToStage2,this)},t.prototype.onAddToStage2=function(e){Layer.STAGE=this.stage,Layer.MAIN=this,Layer.WIDTH=this.stage.stageWidth,Layer.HEIGHT=this.stage.stageHeight,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),Layer.STAGE.addEventListener(egret.Event.RESIZE,this.onResize2,this),RES.getResByUrl(GameURL.USER,this.onUser,this,RES.ResourceItem.TYPE_JSON)},t.prototype.onUser=function(e,t){if(0==e.code){this.isUserLoadEnd=!0,e=e.data;var n=e.user;for(var i in n)User.instance[i]=n[i];User.instance.title=e.site.title,User.instance.kefu=e.site.kefu,User.instance.pay=e.pay,User.instance.game=e.game}else egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&alert("获取用户信息,请稍后重试。错误码："+JSON.stringify(e))},t.prototype.onResize2=function(e){var t=!1;Layer.WIDTH!=this.stage.stageWidth&&(Layer.WIDTH=this.stage.stageWidth,t=!0),Layer.HEIGHT!=this.stage.stageHeight&&(Layer.HEIGHT=this.stage.stageHeight,t=!0),t&&Layer.execute()},t.prototype.onConfigComplete=function(e){var t=new eui.Theme("resource/default.thm.json",this.stage);t.once(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this)},t.prototype.onThemeLoadComplete=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(GroupName.preload)},t.prototype.onResourceLoadComplete=function(e){e.groupName==GroupName.preload?(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.loadGroup(GroupName.game)):e.groupName==GroupName.game&&(this.loadingView.onClose(),this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createGameScence())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){e.groupName==GroupName.game&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.createGameScence=function(){this.isResourceLoadEnd&&this.isUserLoadEnd&&(Layer.MAIN.addChild(Layer.SCENE_LAYER),Layer.MAIN.addChild(Layer.PANEL_LAYER),Layer.MAIN.addChild(new GameScence))},t}(eui.UILayer);__reflect(Main.prototype,"Main");var GroupName=function(){function e(){}return e}();GroupName.eui_res="eui",GroupName.sound="sound",GroupName.font="font",GroupName.flash="flash",GroupName.ui="ui",GroupName.game="game",GroupName.preload="preload",__reflect(GroupName.prototype,"GroupName");var SoundMgr=function(){function e(){this.isBgPlay=!1,this.audioCache={}}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.playBgSound=function(){this.isBgPlay||(this.isBgPlay=!0,null!=this.bgSound&&(this.bgChannel=this.bgSound.play()))},e.prototype.stopBgSound=function(){null!=this.bgSound&&null!=this.bgChannel&&this.isBgPlay&&(this.isBgPlay=!1,this.bgChannel.volume=0)},e.prototype.playEffect=function(e,t,n,i){var o=this;void 0===t&&(t=!1),void 0===n&&(n=null),void 0===i&&(i=null);var r=this.audioCache[e];if(null==r&&(r=RES.getRes(e),this.audioCache[e]=r),null!=r){var s=r.play(0,1);return void(null!=n&&(s.removeEventListener(egret.Event.SOUND_COMPLETE,n,i),s.addEventListener(egret.Event.SOUND_COMPLETE,n,i)))}RES.getResAsync(e,function(r){if(o.audioCache[e]=r,t&&null!=r){var s=r.play(0,1);null!=n&&(s.removeEventListener(egret.Event.SOUND_COMPLETE,n,i),s.addEventListener(egret.Event.SOUND_COMPLETE,n,i))}},this)},e}();__reflect(SoundMgr.prototype,"SoundMgr");var UIUtil=function(){function e(){}return e.setAnchor=function(e,t){void 0===t&&(t=!0);var n=e.width>>1,i=e.height>>1;e.anchorOffsetX=n,e.anchorOffsetY=i,t&&(e.x+=n,e.y+=i)},e.setAnchor2=function(e,t){void 0===t&&(t=!0);var n=e.width>>1,i=e.height>>1;e.anchorOffsetX=n,e.anchorOffsetY=i,t&&(e.x+=n*e.scaleX,e.y+=n*e.scaleY)},e.partOf=function(e,t){for(var n=t;null!=n;){if(e===n)return!0;n=n.parent}return!1},e.loopTween=function(e,t,n,i,o,r,s){function a(){return 0==o?void c():1==o?(o=-1,void c()):0>o?void(null!=r&&r.apply(s)):(o--,void c())}function c(){egret.Tween.get(e).to(t,i).to(n,i).call(a)}void 0===i&&(i=200),void 0===o&&(o=1),void 0===r&&(r=null),void 0===s&&(s=null),egret.Tween.removeTweens(e),a()},e}();__reflect(UIUtil.prototype,"UIUtil");var WindowAdapter=function(){function e(){}return e.resizePanel=function(t){Layer.WIDTH>e.width?t.width=Layer.WIDTH:t.height=Layer.HEIGHT},e.FullScreen=function(t){Layer.WIDTH>e.width?t.scaleX=Layer.WIDTH/e.width:t.scaleY=Layer.HEIGHT/e.height},e.dockLeft=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1),t=0|t;var i=e.parent;n?(e.x=t+e.width/2,e.y=i.height/2-e.height/2):e.x=t+e.width/2},e.dockRight=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1),t=0|t;var i=e.parent;n?(e.x=i.width-e.width/2-t,e.y=i.height/2-e.height/2):e.x=i.width-e.width/2-t},e.dockTop=function(e,t,n){void 0===n&&(n=!1),t=0|t;var i=e.parent;n?(e.x=i.width/2-e.width/2,e.y=t+e.height/2):e.y=t+e.height/2},e.dockBottom=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var i=e.parent;n?(e.x=i.width/2,e.y=i.height-e.height/2-t):e.y=i.height-e.height/2-t},e.dockCenter=function(e){UIUtil.setAnchor(e);var t=e.parent;e.x=t.width>>1,e.y=t.height>>1},e.FullScreenCenter=function(e){UIUtil.setAnchor(e),e.x=Layer.WIDTH>>1,e.y=Layer.HEIGHT>>1},e.dockChipVertical=function(e,t){e.x=3,e.y=78-2*t},e}();WindowAdapter.width=720,WindowAdapter.height=1280,__reflect(WindowAdapter.prototype,"WindowAdapter");